<div class="min-h-screen bg-slate-50">
  <!-- fondo suave -->
  <div class="absolute inset-0 -z-10">
    <div class="h-full w-full bg-[radial-gradient(60rem_60rem_at_20%_10%,rgba(15,23,42,0.08),transparent_60%),radial-gradient(50rem_50rem_at_90%_30%,rgba(2,132,199,0.10),transparent_55%)]"></div>
  </div>

  <div class="mx-auto flex min-h-screen max-w-6xl items-center justify-center px-4 py-10">
    <div class="grid w-full grid-cols-1 gap-6 lg:grid-cols-2 lg:gap-10">
      <!-- panel branding desktop -->
      <section class="hidden lg:flex flex-col justify-center rounded-3xl border border-slate-200 bg-white/70 p-10 shadow-sm backdrop-blur">
        <div class="inline-flex items-center gap-2">
          <div class="flex h-11 w-11 items-center justify-center rounded-2xl bg-slate-900 text-white shadow-sm">
            <span class="material-symbols-rounded text-[22px]">bolt</span>
          </div>
          <div class="leading-tight">
            <div class="text-sm text-slate-500">Bienvenido a</div>
            <div class="text-2xl font-semibold text-slate-900">Ssaas</div>
          </div>
        </div>

        <div class="mt-8 space-y-4">
          <div class="flex items-start gap-3">
            <span class="material-symbols-rounded mt-0.5 text-slate-700">shield</span>
            <div>
              <div class="font-medium text-slate-900">Acceso seguro</div>
              <div class="text-sm text-slate-600">Autenticación por rol y tenant.</div>
            </div>
          </div>

          <div class="flex items-start gap-3">
            <span class="material-symbols-rounded mt-0.5 text-slate-700">dashboard</span>
            <div>
              <div class="font-medium text-slate-900">Gestión clara</div>
              <div class="text-sm text-slate-600">Paneles organizados por empresa.</div>
            </div>
          </div>

          <div class="flex items-start gap-3">
            <span class="material-symbols-rounded mt-0.5 text-slate-700">speed</span>
            <div>
              <div class="font-medium text-slate-900">Rápido y estable</div>
              <div class="text-sm text-slate-600">UX fluida para móvil y escritorio.</div>
            </div>
          </div>
        </div>

        <div class="mt-10 rounded-2xl border border-slate-200 bg-slate-50 p-5">
          <div class="text-sm font-medium text-slate-900">Tip</div>
          <div class="mt-1 text-sm text-slate-600">
            En modo <span class="font-medium">Tenant</span> se requiere <span class="font-medium">Empresa ID</span>.
          </div>
        </div>
      </section>

      <!-- card login -->
      <section class="flex items-center justify-center">
        <div class="w-full max-w-md rounded-3xl border border-slate-200 bg-white p-6 shadow-sm sm:p-8">
          <!-- header -->
          <div class="flex items-start justify-between gap-3">
            <div class="space-y-1">
              <div class="flex items-center gap-2 lg:hidden">
                <div class="flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-white">
                  <span class="material-symbols-rounded text-[20px]">bolt</span>
                </div>
                <div class="text-lg font-semibold text-slate-900">Ssaas</div>
              </div>

              <h1 class="text-2xl font-semibold text-slate-900 sm:text-3xl">
                {{ title() }}
              </h1>

              <p class="text-sm text-slate-500">
                Selecciona el modo e ingresa tus credenciales
              </p>
            </div>

            <div class="hidden sm:flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-1.5 text-xs text-slate-600">
              <span class="material-symbols-rounded text-[16px]">lock</span>
              Secure
            </div>
          </div>

          <!-- tabs -->
          <div class="mt-5 grid grid-cols-2 gap-2 rounded-2xl bg-slate-50 p-1.5">
            <button
              type="button"
              (click)="go('platform')"
              class="inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-medium transition
                     focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/20"
              [class.bg-white]="mode() === 'platform'"
              [class.shadow-sm]="mode() === 'platform'"
              [class.text-slate-900]="mode() === 'platform'"
              [class.text-slate-600]="mode() !== 'platform'">
              <span class="material-symbols-rounded text-[18px]">admin_panel_settings</span>
              Platform
            </button>

            <button
              type="button"
              (click)="go('user')"
              class="inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-medium transition
                     focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/20"
              [class.bg-white]="mode() === 'user'"
              [class.shadow-sm]="mode() === 'user'"
              [class.text-slate-900]="mode() === 'user'"
              [class.text-slate-600]="mode() !== 'user'">
              <span class="material-symbols-rounded text-[18px]">apartment</span>
              Tenant
            </button>
          </div>

          <form [formGroup]="form" (ngSubmit)="submit()" class="mt-5 space-y-4">
            <!-- Email -->
            <div class="space-y-1.5">
              <label class="text-sm font-medium text-slate-700">Email</label>

              <div class="relative">
                <span class="material-symbols-rounded absolute left-3 top-1/2 -translate-y-1/2 text-slate-400">
                  mail
                </span>
                <input
                  type="email"
                  formControlName="email"
                  autocomplete="email"
                  inputmode="email"
                  class="w-full rounded-xl border border-slate-200 bg-white px-10 py-2.5 text-sm text-slate-900
                         outline-none transition focus:border-slate-300 focus:ring-4 focus:ring-slate-900/5"
                  placeholder="tu@correo.com">
              </div>

              <p class="text-xs text-slate-500">Usa el correo con el que te registraste.</p>
            </div>

            <!-- Password -->
            <div class="space-y-1.5">
              <label class="text-sm font-medium text-slate-700">Password</label>

              <div class="relative">
                <span class="material-symbols-rounded absolute left-3 top-1/2 -translate-y-1/2 text-slate-400">
                  key
                </span>

                <input
                  [type]="showPassword() ? 'text' : 'password'"
                  formControlName="password"
                  autocomplete="current-password"
                  class="w-full rounded-xl border border-slate-200 bg-white px-10 pr-12 py-2.5 text-sm text-slate-900
                         outline-none transition focus:border-slate-300 focus:ring-4 focus:ring-slate-900/5"
                  placeholder="••••••••">

                <button
                  type="button"
                  (click)="togglePassword()"
                  class="absolute right-2 top-1/2 -translate-y-1/2 inline-flex h-9 w-9 items-center justify-center rounded-lg
                         text-slate-600 hover:bg-slate-50 focus:outline-none focus-visible:ring-4 focus-visible:ring-slate-900/10"
                  aria-label="Mostrar u ocultar contraseña">
                  <span class="material-symbols-rounded text-[20px]">
                    {{ showPassword() ? 'visibility_off' : 'visibility' }}
                  </span>
                </button>
              </div>
            </div>

            <!-- Empresa ID -->
            <div *ngIf="mode() === 'user'" class="space-y-1.5">
              <label class="text-sm font-medium text-slate-700">Empresa ID</label>

              <div class="relative">
                <span class="material-symbols-rounded absolute left-3 top-1/2 -translate-y-1/2 text-slate-400">
                  badge
                </span>
                <input
                  type="number"
                  formControlName="empresa_id"
                  inputmode="numeric"
                  class="w-full rounded-xl border border-slate-200 bg-white px-10 py-2.5 text-sm text-slate-900
                         outline-none transition focus:border-slate-300 focus:ring-4 focus:ring-slate-900/5"
                  placeholder="Ej: 12">
              </div>

              <div class="flex items-center gap-2 text-xs text-slate-500">
                <span class="material-symbols-rounded text-[16px]">info</span>
                Tenant requiere Empresa ID.
              </div>
            </div>

            <!-- Captcha -->
            <div class="space-y-1.5">
              <label class="text-sm font-medium text-slate-700">Captcha</label>

              <div class="flex items-center gap-2">
                <div class="flex-1 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2.5 text-sm text-slate-700">
                  Resuelve: <span class="font-semibold text-slate-900">{{ captchaText() }}</span>
                </div>

                <button
                  type="button"
                  (click)="refreshCaptcha()"
                  class="inline-flex h-[42px] w-[42px] items-center justify-center rounded-xl border border-slate-200 bg-white
                         text-slate-700 transition hover:bg-slate-50 focus:outline-none focus-visible:ring-4 focus-visible:ring-slate-900/20"
                  aria-label="Cambiar captcha">
                  <span class="material-symbols-rounded text-[20px]">refresh</span>
                </button>
              </div>

              <div class="relative">
                <span class="material-symbols-rounded absolute left-3 top-1/2 -translate-y-1/2 text-slate-400">numbers</span>
                <input
                  type="number"
                  formControlName="captcha_answer"
                  inputmode="numeric"
                  class="w-full rounded-xl border border-slate-200 bg-white px-10 py-2.5 text-sm text-slate-900
                         outline-none transition focus:border-slate-300 focus:ring-4 focus:ring-slate-900/5"
                  placeholder="Tu respuesta">
              </div>

              <p class="text-xs text-slate-500">Anti-bots básico. Si te equivocas, se regenera.</p>
            </div>

            <!-- botón -->
            <button
              type="submit"
              [disabled]="loading() || form.invalid"
              class="mt-2 inline-flex w-full items-center justify-center gap-2 rounded-xl bg-slate-900 px-4 py-2.5
                     text-sm font-semibold text-white shadow-sm transition hover:bg-slate-800
                     disabled:cursor-not-allowed disabled:opacity-60
                     focus:outline-none focus-visible:ring-4 focus-visible:ring-slate-900/20">
              <span class="material-symbols-rounded text-[18px]" *ngIf="!loading()">login</span>
              <span class="material-symbols-rounded animate-spin text-[18px]" *ngIf="loading()">progress_activity</span>
              Entrar
            </button>

            <!-- error -->
            <div
              *ngIf="error()"
              class="flex items-start gap-2 rounded-2xl border border-red-200 bg-red-50 px-3 py-3 text-sm text-red-700">
              <span class="material-symbols-rounded mt-0.5">error</span>
              <div class="min-w-0">
                <div class="font-medium">No se pudo iniciar sesión</div>
                <div class="text-red-700/90">{{ error() }}</div>
              </div>
            </div>
          </form>

          <!-- footer -->
          <div class="mt-6 flex flex-col gap-2 border-t border-slate-200 pt-4 text-xs text-slate-500 sm:flex-row sm:items-center sm:justify-between">
            <div class="flex items-center gap-2">
              <span class="material-symbols-rounded text-[16px]">verified_user</span>
              Sesión segura
            </div>
            <div class="flex items-center gap-2">
              <span class="material-symbols-rounded text-[16px]">help</span>
              ¿Olvidaste tu contraseña?
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>
