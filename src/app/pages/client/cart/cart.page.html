<section class="space-y-4">
  <div class="rounded-2xl border border-slate-200 bg-white shadow-sm p-4">
    <div class="flex items-center justify-between gap-3">
      <div>
        <div class="text-sm text-slate-500">Client</div>
        <div class="text-xl font-semibold">Cart</div>
      </div>

      <button
        type="button"
        class="inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm hover:bg-slate-50"
        (click)="clear()"
        [disabled]="items().length === 0"
      >
        <span class="material-symbols-outlined text-[18px]">delete</span>
        Clear
      </button>
    </div>
  </div>

  <div *ngIf="items().length === 0" class="rounded-2xl border border-slate-200 bg-white p-10 text-center text-sm text-slate-500">
    Empty cart
  </div>

  <div *ngIf="items().length > 0" class="rounded-2xl border border-slate-200 bg-white shadow-sm overflow-hidden">
    <div class="overflow-x-auto">
      <table class="min-w-[760px] w-full text-sm">
        <thead class="bg-slate-50 text-slate-600">
        <tr>
          <th class="px-4 py-3 text-left">Product</th>
          <th class="px-4 py-3 text-left">Price</th>
          <th class="px-4 py-3 text-left">Qty</th>
          <th class="px-4 py-3 text-left">Subtotal</th>
          <th class="px-4 py-3 text-right">Actions</th>
        </tr>
        </thead>

        <tbody class="divide-y">
        <tr *ngFor="let it of items()" class="hover:bg-slate-50">
          <td class="px-4 py-3">
            <div class="flex items-center gap-3">
              <div class="h-12 w-12 overflow-hidden rounded-xl border border-slate-200 bg-slate-50">
                <img *ngIf="it.primary_image_url" [src]="it.primary_image_url" class="h-full w-full object-cover" />
                <div *ngIf="!it.primary_image_url" class="grid h-full w-full place-items-center text-slate-400">
                  <span class="material-symbols-outlined text-[20px]">image</span>
                </div>
              </div>

              <div class="min-w-0">
                <div class="truncate font-semibold text-slate-900">{{ it.descripcion }}</div>
                <div class="text-xs text-slate-500">#{{ it.producto_id }}</div>
              </div>
            </div>
          </td>

          <td class="px-4 py-3 text-slate-700">{{ fmt(it.precio) }}</td>

          <td class="px-4 py-3">
            <div class="inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-white p-1">
              <button
                type="button"
                class="grid h-8 w-8 place-items-center rounded-lg hover:bg-slate-50"
                (click)="dec(it.producto_id)"
              >
                <span class="material-symbols-outlined text-[18px]">remove</span>
              </button>

              <input
                class="w-14 bg-transparent text-center text-sm font-semibold outline-none"
                type="number"
                min="1"
                [value]="it.qty"
                (change)="setQty(it.producto_id, ($any($event.target)).value)"
              />

              <button
                type="button"
                class="grid h-8 w-8 place-items-center rounded-lg hover:bg-slate-50"
                (click)="inc(it.producto_id)"
              >
                <span class="material-symbols-outlined text-[18px]">add</span>
              </button>
            </div>
          </td>

          <td class="px-4 py-3 text-slate-700">{{ fmt(it.precio * it.qty) }}</td>

          <td class="px-4 py-3 text-right">
            <button
              type="button"
              class="inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs hover:bg-slate-50"
              (click)="remove(it.producto_id)"
            >
              <span class="material-symbols-outlined text-[18px]">close</span>
              Remove
            </button>
          </td>
        </tr>

        <tr>
          <td class="px-4 py-4 font-semibold text-slate-700" colspan="3">Total</td>
          <td class="px-4 py-4 text-lg font-semibold text-slate-900">{{ fmt(total()) }}</td>
          <td class="px-4 py-4"></td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
