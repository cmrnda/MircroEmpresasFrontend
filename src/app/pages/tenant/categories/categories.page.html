<div class="rounded-2xl border border-slate-800 bg-slate-900 p-4">
  <div class="flex flex-wrap items-end justify-between gap-3">
    <div>
      <div class="text-lg font-semibold">Categories</div>
      <div class="text-xs text-slate-400">Manage categories</div>
    </div>

    <button
      type="button"
      class="rounded-lg border border-slate-700 bg-slate-800 px-3 py-2 text-xs hover:bg-slate-700"
      (click)="vm.toggleIncludeInactivos()"
    >
      include_inactivos: {{ vm.includeInactivos() ? 'true' : 'false' }}
    </button>
  </div>

  <div class="mt-3 grid gap-3">
    <form class="grid grid-cols-12 gap-2" [formGroup]="form" (ngSubmit)="submitCreate()">
      <input
        class="col-span-12 md:col-span-8 rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-sm outline-none"
        placeholder="Nombre"
        formControlName="nombre"
      />
      <button
        class="col-span-12 md:col-span-4 rounded-lg bg-emerald-600 px-3 py-2 text-sm font-semibold text-white hover:bg-emerald-500 disabled:opacity-60"
        type="submit"
        [disabled]="vm.loading() || form.invalid"
      >
        Create
      </button>
    </form>

    <div *ngIf="vm.error()" class="rounded-lg border border-rose-900 bg-rose-950 px-3 py-2 text-sm text-rose-200">
      {{ vm.error() }}
    </div>

    <div class="overflow-x-auto rounded-xl border border-slate-800">
      <table class="w-full text-sm">
        <thead class="bg-slate-950 text-slate-300">
        <tr>
          <th class="px-3 py-2 text-left">ID</th>
          <th class="px-3 py-2 text-left">Nombre</th>
          <th class="px-3 py-2 text-left">Activo</th>
          <th class="px-3 py-2 text-right">Actions</th>
        </tr>
        </thead>
        <tbody class="divide-y divide-slate-800">
        <tr *ngFor="let c of vm.items()">
          <td class="px-3 py-2">{{ c.categoria_id }}</td>

          <td class="px-3 py-2">
            <ng-container *ngIf="editId() !== c.categoria_id; else editRow">
              {{ c.nombre }}
            </ng-container>

            <ng-template #editRow>
              <div class="grid grid-cols-12 gap-2" [formGroup]="editForm">
                <input
                  class="col-span-12 md:col-span-8 rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-sm outline-none"
                  formControlName="nombre"
                />
                <label class="col-span-12 md:col-span-4 flex items-center gap-2 text-xs text-slate-300">
                  <input type="checkbox" class="h-4 w-4" formControlName="activo" />
                  activo
                </label>
              </div>
            </ng-template>
          </td>

          <td class="px-3 py-2">{{ c.activo ? 'true' : 'false' }}</td>

          <td class="px-3 py-2 text-right">
            <div class="flex justify-end gap-2">
              <ng-container *ngIf="editId() !== c.categoria_id">
                <button
                  type="button"
                  class="rounded-lg border border-slate-700 bg-slate-800 px-3 py-1 text-xs hover:bg-slate-700"
                  (click)="startEdit(c.categoria_id, c.nombre, c.activo)"
                >
                  Edit
                </button>

                <button
                  *ngIf="c.activo"
                  type="button"
                  class="rounded-lg border border-slate-700 bg-slate-800 px-3 py-1 text-xs hover:bg-slate-700"
                  (click)="vm.remove(c.categoria_id)"
                >
                  Delete
                </button>

                <button
                  *ngIf="!c.activo"
                  type="button"
                  class="rounded-lg bg-emerald-600 px-3 py-1 text-xs font-semibold text-white hover:bg-emerald-500"
                  (click)="vm.restore(c.categoria_id)"
                >
                  Restore
                </button>
              </ng-container>

              <ng-container *ngIf="editId() === c.categoria_id">
                <button
                  type="button"
                  class="rounded-lg bg-emerald-600 px-3 py-1 text-xs font-semibold text-white hover:bg-emerald-500"
                  (click)="submitEdit()"
                >
                  Save
                </button>
                <button
                  type="button"
                  class="rounded-lg border border-slate-700 bg-slate-800 px-3 py-1 text-xs hover:bg-slate-700"
                  (click)="cancelEdit()"
                >
                  Cancel
                </button>
              </ng-container>
            </div>
          </td>
        </tr>

        <tr *ngIf="vm.items().length === 0">
          <td class="px-3 py-4 text-center text-slate-400" colspan="4">No data</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
s
