<div class="rounded-3xl border border-slate-200 bg-white shadow-sm p-4 md:p-6 sticky top-[64px] z-10">
  <div class="flex flex-col gap-4 md:flex-row md:items-end md:justify-between">
    <div class="min-w-0">
      <div class="text-xs font-semibold text-slate-500 uppercase tracking-wide">Tenant POS</div>
      <div class="mt-1 text-2xl md:text-3xl font-semibold text-slate-900 truncate">Caja</div>
      <div class="mt-1 text-sm text-slate-500">
        Empresa <span class="font-semibold text-slate-700">#{{ empresaId }}</span>
        <span class="ml-2 inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-2 py-1 text-xs">
          <span class="material-symbols-outlined text-[16px] text-slate-500">receipt_long</span>
          Ticket: <span class="font-semibold text-slate-900">{{ ticketCount }}</span>
        </span>
      </div>
    </div>

    <div class="flex flex-wrap items-center gap-2">
      <button
        type="button"
        class="inline-flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold hover:bg-slate-50 disabled:opacity-50"
        (click)="reload.emit()"
        [disabled]="loading"
      >
        <span class="material-symbols-outlined text-[18px]">refresh</span>
        Recargar
      </button>

      <button
        type="button"
        class="inline-flex items-center gap-2 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-700 hover:bg-rose-100 disabled:opacity-50"
        (click)="clearTicket.emit()"
        [disabled]="ticketCount === 0"
      >
        <span class="material-symbols-outlined text-[18px]">delete</span>
        Limpiar ticket
      </button>
    </div>
  </div>

  <div class="mt-5 grid grid-cols-12 gap-3">
    <div class="col-span-12 lg:col-span-7">
      <div class="flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-4 py-3">
        <span class="material-symbols-outlined text-slate-500 text-[20px]">search</span>
        <input
          class="w-full bg-transparent text-sm outline-none"
          placeholder="Buscar productos..."
          [value]="q"
          (input)="qChange.emit(($any($event.target)).value)"
          (keydown)="onEnter($event)"
        />
        <button
          type="button"
          class="grid h-9 w-9 place-items-center rounded-xl hover:bg-slate-50"
          (click)="search.emit()"
        >
          <span class="material-symbols-outlined text-[18px] text-slate-700">manage_search</span>
        </button>
      </div>
    </div>

    <div class="col-span-12 sm:col-span-6 lg:col-span-3">
      <select
        class="w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm outline-none"
        [value]="categoriaId ?? ''"
        (change)="categoriaChange.emit(($any($event.target)).value); search.emit()"
      >
        <option value="">Todas las categorias</option>
        <option *ngFor="let c of categories" [value]="c.categoria_id">{{ c.nombre }}</option>
      </select>
    </div>

    <div class="col-span-12 sm:col-span-6 lg:col-span-2">
      <button
        type="button"
        class="w-full inline-flex items-center justify-center gap-2 rounded-2xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white hover:bg-slate-800 disabled:opacity-50"
        (click)="search.emit()"
        [disabled]="loading"
      >
        <span class="material-symbols-outlined text-[18px]">manage_search</span>
        Buscar
      </button>
    </div>
  </div>

  <div *ngIf="error" class="mt-4 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700">
    {{ error }}
  </div>
</div>
