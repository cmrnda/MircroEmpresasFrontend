<div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm">
  <div class="flex items-start justify-between gap-3">
    <div class="min-w-0">
      <div class="text-lg font-semibold text-slate-900">Nuevo producto</div>
      <div class="text-sm text-slate-500">Crea un producto dentro de una categoría</div>
    </div>
    <span class="material-symbols-outlined text-slate-400">inventory_2</span>
  </div>

  <form (ngSubmit)="submit()" [formGroup]="form" class="mt-4 space-y-3">
    <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
      <div class="space-y-1 sm:col-span-2">
        <label class="text-sm font-medium text-slate-700" for="p-cat">Categoría</label>
        <select
          id="p-cat"
          formControlName="categoria_id"
          class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:border-slate-400 focus:ring-2 focus:ring-slate-200"
        >
          <option [ngValue]="null">Seleccionar</option>
          <option *ngFor="let c of categories" [ngValue]="c.categoria_id">{{ c.categoria_id }} - {{ c.nombre }}</option>
        </select>
      </div>

      <div class="space-y-1">
        <label class="text-sm font-medium text-slate-700" for="p-code">Código</label>
        <input
          id="p-code"
          type="text"
          formControlName="codigo"
          placeholder="Ej: P-001"
          class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:border-slate-400 focus:ring-2 focus:ring-slate-200"
        />
      </div>

      <div class="space-y-1">
        <label class="text-sm font-medium text-slate-700" for="p-price">Precio</label>
        <input
          id="p-price"
          type="number"
          step="0.01"
          formControlName="precio"
          class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:border-slate-400 focus:ring-2 focus:ring-slate-200"
        />
      </div>

      <div class="space-y-1 sm:col-span-2">
        <label class="text-sm font-medium text-slate-700" for="p-desc">Descripción</label>
        <input
          id="p-desc"
          type="text"
          formControlName="descripcion"
          placeholder="Ej: Coca Cola 500 ml"
          class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:border-slate-400 focus:ring-2 focus:ring-slate-200"
        />
      </div>

      <div class="space-y-1">
        <label class="text-sm font-medium text-slate-700" for="p-stock">Stock</label>
        <input
          id="p-stock"
          type="number"
          step="0.001"
          formControlName="stock"
          class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:border-slate-400 focus:ring-2 focus:ring-slate-200"
        />
      </div>

      <div class="space-y-1">
        <label class="text-sm font-medium text-slate-700" for="p-min">Stock mínimo</label>
        <input
          id="p-min"
          type="number"
          step="1"
          formControlName="stock_min"
          class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:border-slate-400 focus:ring-2 focus:ring-slate-200"
        />
      </div>

      <div class="space-y-1 sm:col-span-2">
        <label class="text-sm font-medium text-slate-700" for="p-img">URL de imagen</label>
        <input
          id="p-img"
          type="text"
          formControlName="image_url"
          placeholder="https://..."
          class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:border-slate-400 focus:ring-2 focus:ring-slate-200"
        />
      </div>
    </div>

    <button
      type="submit"
      [disabled]="loading || form.invalid"
      class="w-full inline-flex items-center justify-center gap-2 rounded-xl bg-slate-900 px-3 py-2 text-sm font-semibold text-white hover:bg-slate-800 disabled:opacity-60 disabled:cursor-not-allowed"
    >
      <span class="material-symbols-outlined text-base">add</span>
      Crear producto
    </button>

    <div *ngIf="error" class="rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700 inline-flex items-start gap-2">
      <span class="material-symbols-outlined text-base">error</span>
      <span class="min-w-0">{{ error }}</span>
    </div>
  </form>
</div>
